#N canvas 0 22 1440 856 10;
#N canvas 0 22 450 278 (subpatch) 0;
#X array buf 227106 float 2;
#X coords 0 1 227106 -1 100 100 1 0 0;
#X restore 21 302 graph;
#X obj 92 544 dac~;
#X floatatom 351 611 5 0 0 0 - - -;
#X obj 351 631 sig~;
#X floatatom 52 661 5 0 0 0 - - -;
#X obj 52 681 sig~;
#X floatatom 164 661 5 0 0 0 - - -;
#X obj 164 681 sig~;
#X floatatom 446 611 5 0 0 0 - - -;
#X obj 446 631 sig~;
#X obj 20 768 samplerate~;
#X obj 20 748 loadbang;
#X obj 20 808 /~;
#X obj 20 788 sig~;
#X obj 58 722 s~ \$0-sampleSize;
#X obj 164 722 s~ \$0-sampleStart;
#X obj 446 672 s~ \$0-density;
#X obj 20 828 s~ \$0-sampleRateDivBySampleSize;
#N canvas 0 22 450 278 (subpatch) 0;
#X array env 512 float 3;
#A 0 0 0.0625 0.0883883 0.108253 0.125 0.139754 0.153093 0.165359 0.176777
0.1875 0.197642 0.207289 0.216506 0.225347 0.233854 0.242061 0.25 0.257694
0.265165 0.272431 0.279509 0.286411 0.293151 0.299739 0.306186 0.3125
0.318689 0.32476 0.330719 0.336573 0.342327 0.347985 0.353553 0.359035
0.364434 0.369755 0.375 0.380173 0.385276 0.390312 0.395285 0.400195
0.405046 0.40984 0.414578 0.419263 0.423896 0.428478 0.433013 0.4375
0.441942 0.446339 0.450694 0.455007 0.459279 0.463512 0.467707 0.471865
0.475986 0.480072 0.484123 0.488141 0.492125 0.496078 0.5 0.503891
0.507752 0.511585 0.515388 0.519164 0.522913 0.526634 0.53033 0.534
0.537645 0.541266 0.544862 0.548435 0.551985 0.555512 0.559017 0.5625
0.565962 0.569402 0.572822 0.576222 0.579601 0.582961 0.586302 0.589624
0.592927 0.596212 0.599479 0.602728 0.60596 0.609175 0.612372 0.615554
0.618718 0.621867 0.625 0.628117 0.631219 0.634306 0.637377 0.640434
0.643477 0.646505 0.649519 0.652519 0.655506 0.658478 0.661438 0.664384
0.667317 0.670238 0.673146 0.676041 0.678924 0.681795 0.684653 0.6875
0.690335 0.693159 0.695971 0.698771 0.701561 0.704339 0.707107 0.709864
0.71261 0.715345 0.71807 0.720785 0.72349 0.726184 0.728869 0.731544
0.734209 0.736864 0.73951 0.742146 0.744773 0.747391 0.75 0.7526 0.75519
0.757772 0.760345 0.76291 0.765466 0.768013 0.770552 0.773082 0.775605
0.778119 0.780625 0.783123 0.785613 0.788095 0.790569 0.793036 0.795495
0.797947 0.800391 0.802827 0.805256 0.807678 0.810093 0.8125 0.8149
0.817294 0.81968 0.822059 0.824432 0.826797 0.829156 0.831508 0.833854
0.836193 0.838525 0.840851 0.843171 0.845484 0.847791 0.850092 0.852386
0.854675 0.856957 0.859233 0.861503 0.863767 0.866025 0.868278 0.870524
0.872765 0.875 0.877229 0.879453 0.881671 0.883883 0.88609 0.888292
0.890488 0.892679 0.894864 0.897044 0.899218 0.901388 0.903552 0.905711
0.907865 0.910014 0.912157 0.914296 0.91643 0.918559 0.920682 0.922801
0.924916 0.927025 0.929129 0.931229 0.933324 0.935414 0.9375 0.939581
0.941657 0.943729 0.945797 0.947859 0.949918 0.951972 0.954021 0.956066
0.958107 0.960143 0.962175 0.964203 0.966227 0.968246 0.970261 0.972272
0.974279 0.976281 0.97828 0.980274 0.982265 0.984251 0.986233 0.988212
0.990186 0.992157 0.994123 0.996086 0.998045 1 0.992172 0.984375 0.976609
0.968874 0.961169 0.953495 0.945852 0.938239 0.930657 0.923106 0.915586
0.908097 0.900638 0.89321 0.885813 0.878447 0.871111 0.863806 0.856532
0.849289 0.842076 0.834894 0.827743 0.820623 0.813533 0.806474 0.799446
0.792449 0.785483 0.778547 0.771642 0.764767 0.757924 0.751111 0.744329
0.737578 0.730857 0.724168 0.717509 0.71088 0.704283 0.697716 0.69118
0.684675 0.678201 0.671757 0.665344 0.658962 0.652611 0.64629 0.64
0.633741 0.627513 0.621315 0.615148 0.609012 0.602907 0.596832 0.590788
0.584775 0.578793 0.572841 0.56692 0.56103 0.555171 0.549343 0.543545
0.537778 0.532041 0.526336 0.520661 0.515017 0.509404 0.503822 0.49827
0.492749 0.487259 0.481799 0.476371 0.470973 0.465605 0.460269 0.454963
0.449689 0.444444 0.439231 0.434048 0.428897 0.423775 0.418685 0.413625
0.408597 0.403599 0.398631 0.393695 0.388789 0.383914 0.37907 0.374256
0.369473 0.364721 0.36 0.355309 0.35065 0.346021 0.341423 0.336855
0.332318 0.327812 0.323337 0.318893 0.314479 0.310096 0.305744 0.301423
0.297132 0.292872 0.288643 0.284444 0.280277 0.27614 0.272034 0.267958
0.263914 0.2599 0.255917 0.251965 0.248043 0.244152 0.240292 0.236463
0.232664 0.228897 0.22516 0.221453 0.217778 0.214133 0.210519 0.206936
0.203383 0.199862 0.196371 0.19291 0.189481 0.186082 0.182714 0.179377
0.176071 0.172795 0.16955 0.166336 0.163153 0.16 0.156878 0.153787
0.150727 0.147697 0.144698 0.14173 0.138793 0.135886 0.13301 0.130165
0.127351 0.124567 0.121815 0.119093 0.116401 0.113741 0.111111 0.108512
0.105944 0.103406 0.1009 0.0984237 0.0959785 0.093564 0.0911803 0.0888274
0.0865052 0.0842138 0.0819531 0.0797232 0.077524 0.0753556 0.073218
0.0711111 0.069035 0.0669896 0.064975 0.0629911 0.0610381 0.0591157
0.0572241 0.0553633 0.0535332 0.0517339 0.0499654 0.0482276 0.0465206
0.0448443 0.0431988 0.041584 0.04 0.0384467 0.0369243 0.0354325 0.0339715
0.0325413 0.0311419 0.0297732 0.0284352 0.027128 0.0258516 0.0246059
0.023391 0.0222068 0.0210534 0.0199308 0.0188389 0.0177778 0.0167474
0.0157478 0.0147789 0.0138408 0.0129335 0.0120569 0.0112111 0.010396
0.00961169 0.00885813 0.00813533 0.00744329 0.00678201 0.00615148 0.00555171
0.0049827 0.00444444 0.00393695 0.00346021 0.00301423 0.002599 0.00221453
0.00186082 0.00153787 0.00124567 0.000984237 0.000753556 0.000553633
0.000384467 0.000246059 0.000138408 6.15148e-05 1.53787e-05 0;
#X coords 0 1 512 0 512 64 1 0 0;
#X restore 353 810 graph;
#X obj 536 672 s~ \$0-envSize;
#X obj 536 631 sig~ 512;
#X floatatom 52 620 5 0 0 0 - - -;
#X obj 52 640 * 48000;
#X floatatom 164 619 5 0 0 0 - - -;
#X obj 164 639 * 48000;
#X floatatom 636 611 5 0 0 0 - - -;
#X obj 636 631 sig~;
#X obj 636 672 s~ \$0-variation;
#X obj 313 351 s \$0-bufSize;
#X obj 203 619 r \$0-bufSize;
#X obj 436 368 s \$0-bufSampleRate;
#X obj 89 888 /~;
#X obj 89 848 r \$0-bufSampleRate;
#X obj 89 868 sig~;
#X obj 89 908 s~ \$0-bufSampleRateDivBySampleRate;
#X obj 91 619 samplerate~;
#X obj 91 599 loadbang;
#X obj 52 702 clip~ 0 888888;
#X obj 51 788 +~ 1e-32;
#X floatatom 596 51 5 0 0 0 - - -;
#X obj 350 672 s~ \$0-velocity;
#X floatatom 596 111 5 0 0 0 - - -;
#X obj 596 69 s \$0-speed;
#X obj 596 92 r density @hv_param 0 1 0.5;
#X obj 351 529 r \$0-speed;
#X obj 636 529 r \$0-var;
#X obj 446 529 r \$0-dens;
#X obj 596 129 s \$0-dens;
#X floatatom 596 171 5 0 0 0 - - -;
#X obj 596 189 s \$0-var;
#X obj 596 152 r variation @hv_param 0 1 0.5;
#X obj 52 579 r \$0-grainSize;
#X obj 164 579 r \$0-scrubPos;
#X floatatom 596 231 5 0 0 0 - - -;
#X floatatom 596 291 5 0 0 0 - - -;
#X obj 596 212 r grainSize @hv_param 0 8 0.1;
#X obj 596 249 s \$0-grainSize;
#X obj 596 272 r scrubPosition @hv_param 0 1 0.5;
#X obj 596 309 s \$0-scrubPos;
#X text 19 10 SAMPLE GRANULATOR;
#X text 19 20 =================;
#X text 594 353 set these when changing buffer contents:;
#X text 594 13 dynamic parameters:;
#X obj 633 111 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X obj 633 171 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X obj 633 231 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X obj 633 291 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X obj 646 52 hsl 128 15 0.01 8 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X obj 596 32 r speed @hv_param 0.01 88 1;
#X obj 22 406 sgrain~ \$0;
#X text 19 226 .;
#X text 29 256 .;
#X text 49 266 .;
#X text 99 256 .;
#X text 79 266 .;
#X text 119 246 .;
#X text 149 236 .;
#X text 105 215 ch.dc.2019.3;
#X obj 363 316 soundfiler;
#X obj 422 341 unpack f f f;
#X obj 21 490 catch~ \$0-out;
#X obj 361 256 loadbang;
#X msg 479 74 1;
#X obj 444 22 loadbang;
#X msg 479 44 1;
#X msg 479 134 0.125;
#X msg 479 164 0.125;
#X obj 22 426 sgrain~ \$0;
#X obj 22 446 sgrain~ \$0;
#X obj 22 466 sgrain~ \$0;
#X msg 479 104 0.05;
#X obj 370 405 print;
#X obj 422 399 print;
#X obj 1045 179 f;
#X obj 1045 200 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X obj 1045 219 select 1 0;
#X msg 1090 243 stop;
#X text 934 316 Record the input to the table;
#X obj 918 174 adc~ 1;
#X text 1036 109 Receive the button value as it changes;
#X text 1110 156 debounce for 3ms;
#X text 1185 125 0: non-pressed;
#X text 1185 141 1: pressed;
#X text 983 368 timer returns the duration of the recorded sample;
#X obj 1127 318 timer 1 sample;
#X text 982 380 (interval between start and stop) in samples;
#X text 880 151 to scope channel 1;
#X text 880 140 Monitor left audio input;
#X obj 1045 267 print recording;
#X msg 1045 243 start;
#X obj 1127 344 s sampleLength1;
#X obj 1046 157 delay 200;
#X obj 972 296 tabwrite~ buf;
#X obj 1014 47 initialise_digitals;
#X obj 1045 129 buttons;
#X obj 859 534 adc~ 3 4 5 6 7 8 9 10;
#X obj 1215 472 metro 20;
#X obj 1215 447 loadbang;
#X obj 1215 493 s snapinterval;
#X obj 858 677 s \$0-speed;
#X obj 928 677 s \$0-dens;
#X obj 990 678 s \$0-var;
#X obj 1047 678 s \$0-grainSize;
#X obj 1138 678 s \$0-scrubPos;
#X obj 858 609 snapshot~;
#X obj 878 589 snapshot~;
#X obj 918 609 snapshot~;
#X obj 938 589 snapshot~;
#X obj 978 609 snapshot~;
#X obj 1026 541 r snapinterval;
#X obj 351 550 * 2;
#X msg 361 280 read piano.wav buf;
#X obj 112 490 adc~ 1;
#X obj 93 514 c_xfade;
#X msg 161 490 \$1 10;
#X obj 163 467 audioToControl;
#X obj 163 415 adc~ 8;
#X obj 163 442 lop~ 200;
#X text 23 82 I/O:;
#X text 23 92 Audio in 1: audio inputs (summed to mono);
#X text 23 102 CV in 0: playback speed;
#X text 23 112 CV in 1: grain density;
#X text 23 122 CV in 2: pitch variation;
#X text 23 132 CV in 3: grain size;
#X text 23 152 CV in 5: wet/dry;
#X text 23 142 CV in 4: scrub position;
#X text 23 62 PEPPER;
#X text 19 40 4-voice granular sampler;
#X text 23 192 Audio out 1-2: mono audio output;
#X text 23 172 Button 1: record in new sample when held;
#X connect 2 0 3 0;
#X connect 3 0 40 0;
#X connect 4 0 5 0;
#X connect 5 0 37 0;
#X connect 6 0 7 0;
#X connect 7 0 15 0;
#X connect 8 0 9 0;
#X connect 9 0 16 0;
#X connect 10 0 13 0;
#X connect 11 0 10 0;
#X connect 12 0 17 0;
#X connect 13 0 12 0;
#X connect 13 0 31 1;
#X connect 20 0 19 0;
#X connect 21 0 22 0;
#X connect 22 0 4 0;
#X connect 23 0 24 0;
#X connect 24 0 6 0;
#X connect 25 0 26 0;
#X connect 26 0 27 0;
#X connect 29 0 24 1;
#X connect 31 0 34 0;
#X connect 32 0 33 0;
#X connect 33 0 31 0;
#X connect 35 0 22 1;
#X connect 36 0 35 0;
#X connect 37 0 14 0;
#X connect 37 0 38 0;
#X connect 38 0 12 1;
#X connect 39 0 42 0;
#X connect 41 0 47 0;
#X connect 43 0 41 0;
#X connect 44 0 130 0;
#X connect 45 0 25 0;
#X connect 46 0 8 0;
#X connect 48 0 49 0;
#X connect 50 0 48 0;
#X connect 51 0 21 0;
#X connect 52 0 23 0;
#X connect 53 0 56 0;
#X connect 54 0 58 0;
#X connect 55 0 53 0;
#X connect 57 0 54 0;
#X connect 63 0 47 0;
#X connect 64 0 49 0;
#X connect 65 0 56 0;
#X connect 66 0 58 0;
#X connect 67 0 42 0;
#X connect 68 0 39 0;
#X connect 78 0 28 0;
#X connect 78 0 91 0;
#X connect 78 1 79 0;
#X connect 79 0 30 0;
#X connect 79 0 92 0;
#X connect 80 0 133 0;
#X connect 81 0 131 0;
#X connect 82 0 47 0;
#X connect 83 0 84 0;
#X connect 83 0 82 0;
#X connect 83 0 90 0;
#X connect 83 0 85 0;
#X connect 83 0 86 0;
#X connect 84 0 42 0;
#X connect 85 0 56 0;
#X connect 86 0 58 0;
#X connect 90 0 49 0;
#X connect 93 0 94 0;
#X connect 94 0 95 0;
#X connect 95 0 104 0;
#X connect 95 0 109 0;
#X connect 95 0 112 0;
#X connect 95 1 96 0;
#X connect 95 1 104 1;
#X connect 96 0 108 0;
#X connect 96 0 112 0;
#X connect 98 0 112 0;
#X connect 104 0 110 0;
#X connect 109 0 108 0;
#X connect 111 0 93 0;
#X connect 114 0 111 0;
#X connect 114 0 93 1;
#X connect 115 0 124 0;
#X connect 115 1 125 0;
#X connect 115 2 126 0;
#X connect 115 3 127 0;
#X connect 115 4 128 0;
#X connect 116 0 118 0;
#X connect 117 0 116 0;
#X connect 124 0 119 0;
#X connect 125 0 120 0;
#X connect 126 0 121 0;
#X connect 127 0 122 0;
#X connect 128 0 123 0;
#X connect 129 0 128 0;
#X connect 129 0 127 0;
#X connect 129 0 125 0;
#X connect 129 0 126 0;
#X connect 129 0 124 0;
#X connect 130 0 2 0;
#X connect 131 0 78 0;
#X connect 132 0 133 1;
#X connect 133 0 1 0;
#X connect 133 0 1 1;
#X connect 134 0 133 2;
#X connect 135 0 134 0;
#X connect 136 0 137 0;
#X connect 137 0 135 0;
